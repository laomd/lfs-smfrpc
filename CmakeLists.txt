cmake_minimum_required(VERSION 3.11)
project(lao_hdfs)

list(APPEND CMAKE_MODULE_PATH ${CMAKE_CURRENT_LIST_DIR}/cmake)

set(ENV{PKG_CONFIG_PATH} "$PKG_CONFIG_PATH:/usr/local/lib64/pkgconfig")
ADD_DEFINITIONS(-DBOOST_LOG_DYN_LINK)
find_package(PkgConfig REQUIRED)
find_package(Protobuf REQUIRED)
find_package(Boost COMPONENTS log REQUIRED)
pkg_search_module(SEASTAR REQUIRED seastar)

include_directories(${PROJECT_SOURCE_DIR})
include_directories(${CMAKE_BINARY_DIR})
include_directories(${SEASTAR_STATIC_INCLUDE_DIRS})
include_directories(${PROTOBUF_INCLUDE_DIRS})
link_libraries(${SEASTAR_STATIC_LDFLAGS})
link_libraries(${PROTOBUF_LIBRARIES})
link_libraries(${Boost_LOG_LIBRARY})
add_compile_options(${SEASTAR_STATIC_CFLAGS_OTHER})

add_subdirectory (echo_service)
add_subdirectory (lao_rpc)
